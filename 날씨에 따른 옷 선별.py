import random
import numpy as np
# 옷장 데이터 생성
closet = {
    "상의": [
        {"이름": "반팔 티셔츠1", "스타일": "캐주얼", "길이": "반팔", "두께": "매우 얇음"},
        {"이름": "반팔 티셔츠2", "스타일": "캐주얼", "길이": "반팔", "두께": "얇음"},
        {"이름": "긴팔 셔츠1", "스타일": "포멀", "길이": "긴팔", "두께": "보통"},
        {"이름": "긴팔 셔츠2", "스타일": "포멀", "길이": "긴팔", "두께": "두꺼움"},
        {"이름": "민소매 티셔츠1", "스타일": "스포티", "길이": "민소매", "두께": "매우 얇음"},
        {"이름": "반팔 셔츠1", "스타일": "포멀", "길이": "반팔", "두께": "보통"},
        {"이름": "긴팔 티셔츠1", "스타일": "캐주얼", "길이": "긴팔", "두께": "매우 두꺼움"},
        {"이름": "긴팔 티셔츠2", "스타일": "캐주얼", "길이": "긴팔", "두께": "보통"},
        {"이름": "반팔 티셔츠3", "스타일": "스포티", "길이": "반팔", "두께": "얇음"},
        {"이름": "긴팔 셔츠3", "스타일": "포멀", "길이": "긴팔", "두께": "매우 두꺼움"},
        {"이름": "후드티1", "스타일": "스트릿", "길이": "긴팔", "두께": "두꺼움"},
        {"이름": "후드티2", "스타일": "스트릿", "길이": "긴팔", "두께": "보통"},
        {"이름": "반팔 셔츠2", "스타일": "포멀", "길이": "반팔", "두께": "보통"},
        {"이름": "반팔 티셔츠4", "스타일": "미니멀", "길이": "반팔", "두께": "얇음"},
        {"이름": "민소매 티셔츠2", "스타일": "스포티", "길이": "민소매", "두께": "매우 얇음"},
        {"이름": "긴팔 티셔츠3", "스타일": "캐주얼", "길이": "긴팔", "두께": "보통"},
        {"이름": "긴팔 티셔츠4", "스타일": "캐주얼", "길이": "긴팔", "두께": "매우 얇음"},
        {"이름": "반팔 티셔츠5", "스타일": "미니멀", "길이": "반팔", "두께": "얇음"},
        {"이름": "반팔 티셔츠6", "스타일": "캐주얼", "길이": "반팔", "두께": "매우 얇음"},
        {"이름": "긴팔 셔츠4", "스타일": "포멀", "길이": "긴팔", "두께": "보통"},
        {"이름": "긴팔 셔츠5", "스타일": "포멀", "길이": "긴팔", "두께": "두꺼움"},
        {"이름": "반팔 티셔츠7", "스타일": "스포티", "길이": "반팔", "두께": "얇음"},
        {"이름": "반팔 티셔츠8", "스타일": "캐주얼", "길이": "반팔", "두께": "매우 얇음"},
        {"이름": "긴팔 티셔츠5", "스타일": "캐주얼", "길이": "긴팔", "두께": "보통"},
        {"이름": "긴팔 티셔츠6", "스타일": "캐주얼", "길이": "긴팔", "두께": "매우 얇음"},
        {"이름": "민소매 티셔츠3", "스타일": "스포티", "길이": "민소매", "두께": "매우 얇음"},
        {"이름": "반팔 티셔츠9", "스타일": "미니멀", "길이": "반팔", "두께": "얇음"},
        {"이름": "긴팔 셔츠6", "스타일": "포멀", "길이": "긴팔", "두께": "보통"},
        {"이름": "긴팔 셔츠7", "스타일": "포멀", "길이": "긴팔", "두께": "두꺼움"},
        {"이름": "반팔 티셔츠10", "스타일": "캐주얼", "길이": "반팔", "두께": "매우 얇음"}
    ],
    "하의": [
        {"이름": "반바지1", "스타일": "캐주얼", "길이": "반바지", "두께": "매우 얇음"},
        {"이름": "반바지2", "스타일": "스포티", "길이": "반바지", "두께": "얇음"},
        {"이름": "반바지3", "스타일": "스트릿", "길이": "반바지", "두께": "보통"},
        {"이름": "반바지4", "스타일": "미니멀", "길이": "반바지", "두께": "두꺼움"},
        {"이름": "반바지5", "스타일": "포멀", "길이": "반바지", "두께": "매우 두꺼움"},
        {"이름": "긴바지1", "스타일": "캐주얼", "길이": "긴바지", "두께": "매우 얇음"},
        {"이름": "긴바지2", "스타일": "스포티", "길이": "긴바지", "두께": "얇음"},
        {"이름": "긴바지3", "스타일": "스트릿", "길이": "긴바지", "두께": "보통"},
        {"이름": "긴바지4", "스타일": "미니멀", "길이": "긴바지", "두께": "두꺼움"},
        {"이름": "긴바지5", "스타일": "포멀", "길이": "긴바지", "두께": "매우 두꺼움"},
        {"이름": "반바지6", "스타일": "캐주얼", "길이": "반바지", "두께": "얇음"},
        {"이름": "반바지7", "스타일": "스포티", "길이": "반바지", "두께": "보통"},
        {"이름": "반바지8", "스타일": "스트릿", "길이": "반바지", "두께": "두꺼움"},
        {"이름": "반바지9", "스타일": "미니멀", "길이": "반바지", "두께": "매우 두꺼움"},
        {"이름": "반바지10", "스타일": "포멀", "길이": "반바지", "두께": "매우 얇음"},
        {"이름": "긴바지6", "스타일": "캐주얼", "길이": "긴바지", "두께": "얇음"},
        {"이름": "긴바지7", "스타일": "스포티", "길이": "긴바지", "두께": "보통"},
        {"이름": "긴바지8", "스타일": "스트릿", "길이": "긴바지", "두께": "두꺼움"},
        {"이름": "긴바지9", "스타일": "미니멀", "길이": "긴바지", "두께": "매우 두꺼움"},
        {"이름": "긴바지10", "스타일": "포멀", "길이": "긴바지", "두께": "매우 얇음"},
        {"이름": "반바지11", "스타일": "캐주얼", "길이": "반바지", "두께": "보통"},
        {"이름": "반바지12", "스타일": "스포티", "길이": "반바지", "두께": "두꺼움"},
        {"이름": "반바지13", "스타일": "스트릿", "길이": "반바지", "두께": "매우 두꺼움"},
        {"이름": "반바지14", "스타일": "미니멀", "길이": "반바지", "두께": "매우 얇음"},
        {"이름": "반바지15", "스타일": "포멀", "길이": "반바지", "두께": "얇음"},
        {"이름": "긴바지11", "스타일": "캐주얼", "길이": "긴바지", "두께": "보통"},
        {"이름": "긴바지12", "스타일": "스포티", "길이": "긴바지", "두께": "두꺼움"},
        {"이름": "긴바지13", "스타일": "스트릿", "길이": "긴바지", "두께": "매우 두꺼움"},
        {"이름": "긴바지14", "스타일": "미니멀", "길이": "긴바지", "두께": "매우 얇음"},
        {"이름": "긴바지15", "스타일": "포멀", "길이": "긴바지", "두께": "얇음"},
    ]
}

# 각 옷에 대한 적합 온도 범위 설정
# temperature_ranges = {
#     "반바지": [(23, 27), (28, float('inf'))],
#     "민소매": [(28, float('inf'))],
#     "반팔": [(23, 27), (20, 22)],
#     "긴바지": [(28, float('inf')), (23, 27), (20, 22), (17, 19), (12, 16), (9, 11)],
#     "긴팔": [(20, 22), (17, 19), (12, 16), (9, 11), (-float('inf'), 8)]
# }

temperature_ranges_by_cloth = {
    "반바지":{
        "매우 두꺼움":[(23, 27), (28, float('inf'))],
        "두꺼움":[(23, 27), (28, float('inf'))],
        "보통":[(23, 27), (28, float('inf'))],
        "얇음":[(23, 27), (28, float('inf'))],
        "매우 얇음":[(23, 27), (28, float('inf'))]
    },
    "민소매":{
        "매우 두꺼움":[(28, float('inf'))],
        "두꺼움":[(28, float('inf'))],
        "보통":[(28, float('inf'))],
        "얇음":[(28, float('inf'))],
        "매우 얇음":[(28, float('inf'))]
    },
    "반팔":{
        "매우 두꺼움":[(20, 22)],
        "두꺼움":[(20, 22)],
        "보통":[(20, 22)],
        "얇음":[(23, 27)],
        "매우 얇음":[(23, 27)]
    },
    "긴바지":{
        "매우 두꺼움":[(9, 11)],
        "두꺼움":[(12, 16)],
        "보통":[(20, 22), (17, 19)],
        "얇음":[(23, 27)],
        "매우 얇음":[(28, float('inf'))]
    },
    "긴팔":{
        "매우 두꺼움":[(5, 8)],
        "두꺼움":[(9, 11)],
        "보통":[(12, 16)],
        "얇음":[(17, 19)],
        "매우 얇음":[(20, 22)]
    }
}

temperature_range=[(28, float('inf')), (23, 27), (20, 22), (17, 19), (12, 16), (9, 11), (5, 8), (-float('inf'), 4)]

def cal_clothes_score(temperature, closet):
    appropriate_clothes = {"상의": [], "하의": []}
    clothes_score = {"상의":[],"하의":[]}
    temp_idx = 0
    for i in range(len(temperature_range)):
        if temperature_range[i][0]<=temperature<=temperature_range[i][1]:
            temp_idx=i
            break
    for category, clothes in closet.items():
        for cloth in clothes:
            score = -float('inf')
            for temp_range in temperature_ranges_by_cloth[cloth["길이"]][cloth["두께"]]:

                score = max(score,-abs(temp_idx-temperature_range.index(temp_range)))
            appropriate_clothes[category].append(cloth)
            clothes_score[category].append(score)

    clothes_and_score_top = np.vstack((np.array(appropriate_clothes["상의"]),np.array(clothes_score["상의"])))
    clothes_and_score_bottom = np.vstack((np.array(appropriate_clothes["하의"]),np.array(clothes_score["하의"])))

    clothes_and_score_top = clothes_and_score_top[:,clothes_and_score_top[1].argsort()[::-1]]
    clothes_and_score_bottom = clothes_and_score_bottom[:,clothes_and_score_bottom[1].argsort()[::-1]]

    appropriate_clothes = {
        "상의": clothes_and_score_top[0].tolist(),
        "하의": clothes_and_score_bottom[0].tolist()
    }

    return appropriate_clothes
    
# # 온도에 따라 적합한 옷을 찾는 함수
# def find_clothes_for_temperature(temperature, closet):
#     appropriate_clothes = {"상의": [], "하의": []}
#     for category, clothes in closet.items():
#         for cloth in clothes:
#             for temp_range in temperature_ranges[cloth["길이"]]:
#                 if temp_range[0] <= temperature <= temp_range[1]:
#                     appropriate_clothes[category].append(cloth)
#                     break
#     return appropriate_clothes

# 사용자 입력 받기
def main():
    try:
        temperature = round(float(input("현재 온도를 입력하세요(도씨): ")))
    except ValueError:
        print("유효한 숫자를 입력하세요.")
        return

    style = input("어떤 스타일의 옷을 입고 싶으신가요? (캐주얼, 포멀 등): ")

    suitable_clothes = cal_clothes_score(temperature,closet)

    # 온도에 맞는 옷 찾기
    # suitable_clothes = find_clothes_for_temperature(temperature, closet)

    # 스타일에 맞는 옷 필터링
    suitable_clothes_by_style = {
        "상의": [cloth for cloth in suitable_clothes["상의"] if cloth["스타일"] == style],
        "하의": [cloth for cloth in suitable_clothes["하의"] if cloth["스타일"] == style]
    }

    if suitable_clothes_by_style["상의"] and suitable_clothes_by_style["하의"]:
        print(f"현재 온도에 적합한 상의: {[cloth['이름'] for cloth in suitable_clothes_by_style['상의']]}")
        print(f"현재 온도에 적합한 하의: {[cloth['이름'] for cloth in suitable_clothes_by_style['하의']]}")
    else:
        print("현재 온도와 스타일에 맞는 옷이 없습니다.")

if __name__ == "__main__":
    main()